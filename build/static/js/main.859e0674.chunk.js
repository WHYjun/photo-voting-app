(this["webpackJsonpphoto-voting-app"]=this["webpackJsonpphoto-voting-app"]||[]).push([[0],{72:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(0),a=t.n(c),s=t(38),o=t.n(s),i=t(39),u=t(16),j=t(4),b=t(5),l=t(3);function d(){var e=Object(b.a)(["\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return d=function(){return e},e}function p(){var e=Object(b.a)(["\n  width: 80px;\n  text-align: center;\n  &:not(:last-child) {\n    margin-right: 10px;\n  }\n  border-bottom: 3px solid\n    ",";\n"]);return p=function(){return e},e}function h(){var e=Object(b.a)(["\n  display: flex;\n"]);return h=function(){return e},e}function x(){var e=Object(b.a)(["\n  color: white;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  padding: 0px 10px;\n  background-color: rgba(20, 20, 20, 0.8);\n  z-index: 10;\n  box-shadow: 0px 1px 5px 2px rgba(0, 0, 0, 0.8);\n"]);return x=function(){return e},e}var O=l.c.header(x()),f=l.c.ul(h()),m=l.c.li(p(),(function(e){return e.currentPage?"#736AFF":"transparent"})),g=Object(l.c)(u.b)(d()),v=Object(j.h)((function(e){var n=e.location.pathname;return Object(r.jsx)(O,{children:Object(r.jsxs)(f,{children:[Object(r.jsx)(m,{currentPage:"/"===n,children:Object(r.jsx)(g,{to:"/tournament",children:"Tournament"})}),Object(r.jsx)(m,{currentPage:"/history"===n,children:Object(r.jsx)(g,{to:"/history",children:"History"})})]})})})),w=t(2),y=t.n(w),k=t(8),S=t(15),F=t.n(S),N=t(23);function P(){var e=Object(b.a)(["\n  position: absolute;\n  padding: 20px 20px;\n"]);return P=function(){return e},e}var z=l.c.div(P()),M=function(){var e=Object(N.a)(),n=e.register,t=e.errors,c=e.handleSubmit,a=Object(j.g)(),s=function(){var e=Object(k.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post("/signin",{username:n.username,password:n.password}).then((function(e){e.data.redirect&&a.push({pathname:e.data.redirect,state:{username:n.username}})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(r.jsxs)(z,{children:[Object(r.jsx)("p",{children:"Welcome to Photo Voting Application"}),Object(r.jsxs)("form",{onSubmit:c(s),children:[Object(r.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(r.jsx)("input",{name:"username",type:"text",placeholder:"username",ref:n({required:!0,minLength:{value:3,message:"Min length is 3"}})}),Object(r.jsx)("br",{}),t.username&&t.username.message,Object(r.jsx)("br",{}),Object(r.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(r.jsx)("input",{name:"password",placeholder:"Password",type:"password",ref:n({required:!0,minLength:{value:8,message:"Min length is 8"}})}),Object(r.jsx)("br",{}),t.password&&t.password.message,Object(r.jsx)("br",{}),Object(r.jsx)("button",{type:"submit",children:"Sign In"})]}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"If you don't have an account, please register to play!"}),Object(r.jsx)("a",{href:"/#/register",children:"Click here to register!"})]})},C=t(9);function E(){var e=Object(b.a)(["\n  font-size: 20px;\n  text-align: center;\n  display: block;\n"]);return E=function(){return e},e}function I(){var e=Object(b.a)(["\n  font-size: 30px;\n  text-align: center;\n  margin: 20px auto;\n  display: block;\n"]);return I=function(){return e},e}function L(){var e=Object(b.a)(["\n  margin-top: 10px;\n  margin-left: auto;\n  margin-right: auto;\n  border-collapse: collapse;\n  border: 3px solid #ddd;\n"]);return L=function(){return e},e}function R(){var e=Object(b.a)(["\n  &:hover {\n    background-color: #ddd;\n  }\n"]);return R=function(){return e},e}function q(){var e=Object(b.a)(["\n  border: 1px solid #ddd;\n  padding: 12px;\n"]);return q=function(){return e},e}var U=l.c.td(q()),A=l.c.tr(R()),H=l.c.table(L()),W=l.c.text(I()),B=l.c.text(E()),J=function(){var e=Object(c.useState)([]),n=Object(C.a)(e,2),t=n[0],a=n[1];Object(c.useEffect)(Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/history").then((function(e){a(e.data.history)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)(W,{children:"Tournament History"}),Object(r.jsxs)(H,{children:[Object(r.jsx)("thead",{children:["USERNAME","WINNER"].map((function(e,n){return Object(r.jsx)(U,{children:e},n)}))}),Object(r.jsx)("tbody",{children:function(){var e=0;return t&&t.map((function(n){var t=n.username,c=n.winner;return e++,Object(r.jsxs)(A,{children:[Object(r.jsx)(U,{children:Object(r.jsx)(B,{children:t})}),Object(r.jsx)(U,{children:Object(r.jsx)("img",{src:c})})]},e)}))}()})]})]})},T=t(6);function G(){var e=Object(b.a)(["\n  font-size: 30px;\n  text-align: center;\n  margin: 20px auto;\n  display: block;\n"]);return G=function(){return e},e}function V(){var e=Object(b.a)(["\n  margin-left: auto;\n  margin-right: auto;\n  display: block;\n"]);return V=function(){return e},e}function D(){var e=Object(b.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  align-items: center;\n  --h: 40vh;\n  .photo-item {\n    border: 1px solid black;\n    overflow: hidden;\n    position: relative;\n  }\n  .photo {\n    width: 100%;\n    height: 100%;\n  }\n  .photo:hover {\n    opacity: 0.8;\n  }\n  .vs {\n    font-size: calc((var(--h) / 3));\n  }\n"]);return D=function(){return e},e}var K=l.c.div(D()),Q=l.c.button(V()),X=l.c.text(G()),Y=function(){var e,n=Object(j.g)();void 0===n.location.state||void 0===n.location.state.username?n.push("/"):e=n.location.state.username;var t=Object(c.useState)([]),a=Object(C.a)(t,2),s=a[0],o=a[1],i=Object(c.useState)([]),u=Object(C.a)(i,2),b=u[0],l=u[1],d=Object(c.useState)([]),p=Object(C.a)(d,2),h=p[0],x=p[1],O=Object(c.useState)(!1),f=Object(C.a)(O,2),m=f[0],g=f[1],v=Object(c.useState)(!0),w=Object(C.a)(v,2),S=w[0],N=w[1];Object(c.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var n,t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F()("/photos");case 2:n=e.sent,t=n.data.data,o(t),l([t[0],t[1]]),N(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var P=function(){var n=Object(k.a)(y.a.mark((function n(t){var r,c;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.target.currentSrc,!(s.length>2)){n.next=8;break}c=s.slice(2),l([c[0],c[1]]),o(c),x([].concat(Object(T.a)(h),[r])),n.next=17;break;case 8:if(0!==h.length){n.next=14;break}return n.next=11,F.a.post("/winner",{winner:r,user:e}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 11:l([r]),n.next=17;break;case 14:o([].concat(Object(T.a)(h),[r])),x([]),g(!0);case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return S?Object(r.jsx)(X,{children:"Loading..."}):m?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(X,{children:["Round of ",s.length]}),Object(r.jsx)("br",{}),Object(r.jsx)(Q,{onClick:function(e){l([s[0],s[1]]),g(!1)},children:"Go to the next round!"})]}):1==b.length?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(X,{children:"Final Winner"}),Object(r.jsx)(K,{children:Object(r.jsx)("div",{className:"photo-item",onClick:P,children:Object(r.jsx)("img",{className:"photo",src:b[0],alt:"First"})},b[0])}),Object(r.jsx)(X,{children:"Check another user's history at History page"})]}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(K,{children:[Object(r.jsx)("div",{className:"photo-item",onClick:P,children:Object(r.jsx)("img",{className:"photo",src:b[0],alt:"First"})},b[0]),Object(r.jsx)("div",{className:"vs",children:"vs"}),Object(r.jsx)("div",{className:"photo-item",onClick:P,children:Object(r.jsx)("img",{className:"photo",src:b[1],alt:"Second"})},b[1])]})})};function Z(){var e=Object(b.a)(["\n  position: absolute;\n  padding: 20px 20px;\n"]);return Z=function(){return e},e}var $=l.c.div(Z()),_=function(){var e=Object(N.a)(),n=e.register,t=e.errors,c=e.handleSubmit,a=Object(j.g)(),s=function(){var e=Object(k.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post("/member",{username:n.username,password:n.password}).then((function(e){e.data.redirect&&a.push({pathname:e.data.redirect,state:{username:n.username}})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(r.jsx)($,{children:Object(r.jsxs)("form",{onSubmit:c(s),children:[Object(r.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(r.jsx)("input",{name:"username",type:"text",placeholder:"username",ref:n({required:!0,minLength:{value:3,message:"Min length is 3"}})}),Object(r.jsx)("br",{}),t.username&&t.username.message,Object(r.jsx)("br",{}),Object(r.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(r.jsx)("input",{name:"password",placeholder:"Password",type:"password",ref:n({required:!0,minLength:{value:8,message:"Min length is 8"}})}),Object(r.jsx)("br",{}),t.password&&t.password.message,Object(r.jsx)("br",{}),Object(r.jsx)("button",{type:"submit",children:"Register"})]})})},ee=function(){return Object(r.jsx)(u.a,{children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(v,{}),Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/",exact:!0,component:M}),Object(r.jsx)(j.b,{path:"/history",exact:!0,component:J}),Object(r.jsx)(j.b,{path:"/tournament",render:function(e){return Object(r.jsx)(Y,Object(i.a)({},e))}}),Object(r.jsx)(j.b,{path:"/register",exact:!0,component:_}),Object(r.jsx)(j.a,{from:"*",to:"/"})]})]})})},ne=t(43);function te(){var e=Object(b.a)(["\n  ",";\n  a {\n    text-decoration: none;\n    color: inherit;\n  }\n  * {\n    box-sizing: border-box;\n  }\n  body {\n    font-family:-apple-system, BlinkMacSystemFont, 'SegoeUI', Roboto;\n    font-size: 14px;\n    background-color: rgba(20,20,20,1);\n    color: white;\n    padding-top: 50px;\n  }\n  form {\n    padding-top: 10px;\n    margin: 10px;\n  }\n"]);return te=function(){return e},e}var re=Object(l.a)(te(),ne.a);var ce=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ee,{}),Object(r.jsx)(re,{})]})};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(ce,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.859e0674.chunk.js.map